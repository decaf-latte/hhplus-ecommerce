# 프로젝트 요구사항

> - 상품 주문에 필요한 메뉴 정보들을 구성하고 조회가 가능해야 함
> - 사용자는 상품을 여러개 선택해 주문할 수 있고, 미리 충전한 잔액을 이용함
> - 상품 주문 내역을 통해 판매량이 가장 높은 상품을 추천함
> - 동시성 이슈를 고려하여 구현해야 함
> - 재고 관리에 문제 없도록 구현해야 함

---
## 시퀀스 다이어그램

### 1. 상품 조회 API 
![상품 조회 시퀀스 다이어그램](/docs/img/01.diagram-product.png)

- 상품 정보(ID, 이름, 가격, 잔여수량) 조회
- 조회 시점의 상품별 **정확한 잔여수량** 반환

### 2. 잔액 충전 / 조회 API 

![잔액 충전 / 조회 시퀀스 다이어그램](/docs/img/02.diagram-balance.png)

- 결제에 사용될 금액을 충전
- 사용자 식별자를 기반으로 충전할 금액을 받아 잔액 충전
- 사용자 식별자로 사용자 잔액 조회

### 3. 주문 / 결제 API 

![주문 / 결제 시퀀스 다이어그램](/docs/img/03.diagram-order.png)

- 사용자 식별자와 (상품 ID, 수량) 목록을 입력받아 주문하고 결제를 수행하는 API
- 결제는 기 충전된 잔액을 기반으로 수행하며 성공할 시 잔액을 차감
- 결제 성공 시에 실시간으로 주문 정보를 데이터 플랫폼에 전송 (어플리케이션 외부 라는 가정만 지켜 Mock API로 구현)
- 동시성 이슈를 고려하여 구현해야 함

### 4. 상위 상품 조회 API 
![상위 상품 조회 시퀀스 다이어그램](/docs/img/04.diagram-top.png)

- 최근 3일간 가장 많이 팔린 상위 5개 상품 조회
- 판매량이 가장 높은 상품을 추천함

### 5. 선착순 쿠폰 기능 API 
![선착순 쿠폰 기능 시퀀스 다이어그램](/docs/img/05.diagram-coupon.png)

- 선착순 쿠폰 발급 API 
- 보유 쿠폰 목록 조회 API
- 쿠폰을 발급하고 사용자가 쿠폰을 사용할 수 있도록 함
- 사용자는 선착순으로 할인 쿠폰을 발급 가능
- 주문 시에 유효한 할인 쿠폰을 함께 제출하면, 전체 주문금액에 대해 할인 혜택을 부여
- 쿠폰은 한 번에 한 명의 사용자만 사용 가능하며, 사용자는 한 번에 한 장의 쿠폰만 사용 가능함
- 쿠폰은 발급 순서대로 사용 가능하며, 쿠폰은 한 번 사용하면 재사용할 수 없음

